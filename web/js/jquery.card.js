!function(t,n,i){function a(t){this.settings=t,this.init()}a.prototype={init:function(){this.initTabs(),this.initSearch(),this.initModalAjax(),this.initModalCategory(),this.initModalProduct(),this.initModalIngredient()},initTabs:function(){var n=this;t(n.settings.tabs.container).unbind("click").click(function(i){i.preventDefault(),t(n.settings.tabs.container).removeClass("active"),t(this).addClass("active"),t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.tabs.content).html(i),n.refresh()}})})},initSearch:function(){var n=this;t(n.settings.search.container).unbind("keyup").keyup(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{search:t(this).val()},success:function(i){t(n.settings.search.content).html(i)}})})},initModalAjax:function(){var n=this;t(n.settings.modal.ajax).unbind("click").click(function(i){i.preventDefault(),("undefined"==t(this).attr("data-confirm")||confirm(t(this).attr("data-confirm")))&&t.ajax({type:"POST",url:t(this).attr("href"),data:{},success:function(i){t(n.settings.tabs.content).html(i.html),n.refresh()}})})},initModalCategory:function(){var n=this;t(n.settings.modal.category.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.category.content).html(i),t(n.settings.modal.category.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.category.content).html(i):(t(n.settings.modal.category.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},initModalProduct:function(){var n=this;t(n.settings.modal.product.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.product.content).html(i),t(n.settings.modal.product.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.product.content).html(i):(t(n.settings.modal.product.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},initModalIngredient:function(){var n=this;t(n.settings.modal.ingredient.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.ingredient.content).html(i),t(n.settings.modal.ingredient.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.ingredient.content).html(i):(t(n.settings.modal.ingredient.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},getHtml:function(n,i){var a=t(t.parseHTML(n));return a.filter(i).add(a.find(i)).html()},refresh:function(){var n=this;n.initSearch(),n.initModalAjax(),n.initModalCategory(),n.initModalProduct(),n.initModalIngredient(),t(i).foundation(),t(i).media(),ddTree()}},t.fn.card=function(n){var i=t.extend({tabs:{container:".card .editor .editor-tabs a[data-url]",content:"#editor-content"},search:{container:".card .editor .search",content:"#editor-search"},modal:{ajax:".card .editor a[data-ajax]",category:{container:".card .editor a[data-modal=category]",content:"#modal-editor .content",form:"#modal-editor .content form",id:"#modal-editor",tab:"#tab-category",image:"modal-image"},product:{container:".card .editor a[data-modal=product]",content:"#modal-editor .content",form:"#modal-editor .content form",id:"#modal-editor",tab:"#tab-product",image:"modal-image"},ingredient:{container:".card .editor a[data-modal=ingredient]",content:"#modal-editor .content",form:"#modal-editor .content form",id:"#modal-editor",tab:"#tab-ingredient",image:"modal-image"}}},n);new a(i)}}(jQuery,window,window.document);