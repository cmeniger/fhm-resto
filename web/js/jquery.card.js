!function(t,n,i){function e(t){this.settings=t,this.init()}e.prototype={init:function(){this.initTabs(),this.initSearch(),this.initModalAjax(),this.initModalCategory(),this.initModalProduct(),this.initModalIngredient()},initTabs:function(){var n=this;t(n.settings.tabs.container).unbind("click").click(function(i){i.preventDefault(),t(n.settings.tabs.container).removeClass("active"),t(this).addClass("active"),t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.tabs.content).html(i),n.refresh()}})})},initSearch:function(){var n=this;t(n.settings.search.container).unbind("keyup").keyup(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{search:t(this).val()},success:function(i){t(n.settings.search.content).html(i),n.refresh()}})})},initModalAjax:function(){var n=this;t(n.settings.modal.ajax).unbind("click").click(function(i){i.preventDefault(),("undefined"==t(this).attr("data-confirm")||confirm(t(this).attr("data-confirm")))&&t.ajax({type:"POST",url:t(this).attr("href"),data:{},success:function(i){t("undefined"==typeof i.content?n.settings.tabs.content:i.content).html(i.html),n.refresh()}})})},initModalCategory:function(){var n=this;t(n.settings.modal.category.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.category.content).html(i),t(n.settings.modal.category.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.category.content).html(i):(t(n.settings.modal.category.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},initModalProduct:function(){var n=this;t(n.settings.modal.product.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.product.content).html(i),t(n.settings.modal.product.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.product.content).html(i):(t(n.settings.modal.product.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},initModalIngredient:function(){var n=this;t(n.settings.modal.ingredient.container).unbind("click").click(function(i){t.ajax({type:"POST",url:t(this).attr("data-url"),data:{},success:function(i){t(n.settings.modal.ingredient.content).html(i),t(n.settings.modal.ingredient.form).unbind("submit").submit(function(i){i.preventDefault(),t.ajax({type:"POST",url:t(this).attr("action"),data:t(this).serialize(),success:function(i){"undefined"==typeof i.status?t(n.settings.modal.ingredient.content).html(i):(t(n.settings.modal.ingredient.id).foundation("reveal","close"),t(n.settings.tabs.content).html(i.html)),n.refresh()}})}),n.refresh()}})})},initExternal:function(){var n=this;t(i).foundation(),t(i).media(),t(i).form({required:n.settings.form.required}),ddTree()},getHtml:function(n,i){var e=t(t.parseHTML(n));return e.filter(i).add(e.find(i)).html()},refresh:function(){var t=this;t.initSearch(),t.initModalAjax(),t.initModalCategory(),t.initModalProduct(),t.initModalIngredient(),t.initExternal()}},t.fn.card=function(n){var i=t.extend({tabs:{container:".card.card-editor .editor-tabs a[data-url]",content:"#editor-content"},search:{container:".card.card-editor .search",content:"#editor-search"},modal:{ajax:".card.card-editor a[data-ajax]",category:{container:".card.card-editor a[data-modal=category]",content:"#modal-editor-category .content",form:"#modal-editor-category .content form",id:"#modal-editor-category",tab:"#tab-category",image:"modal-image"},product:{container:".card.card-editor a[data-modal=product]",content:"#modal-editor-product .content",form:"#modal-editor-product .content form",id:"#modal-editor-product",tab:"#tab-product",image:"modal-image"},ingredient:{container:".card.card-editor a[data-modal=ingredient]",content:"#modal-editor-ingredient .content",form:"#modal-editor-ingredient .content form",id:"#modal-editor-ingredient",tab:"#tab-ingredient",image:"modal-image"}},form:{required:""}},n);new e(i)}}(jQuery,window,window.document);