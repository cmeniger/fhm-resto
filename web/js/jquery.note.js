!function(t,e,i){function a(t){this.settings=t,this.init()}a.prototype={init:function(){this.initAdd(),this.initEdit()},initAdd:function(){var e=this;t(e.settings.add.note).each(function(){e.addInit(t(this).attr("data-id")),e.addRefresh(t(this).attr("data-id"),t(e.settings.add.value+t(this).attr("data-id")).val()),t(this).mouseleave(function(){e.addRefresh(t(this).attr("data-id"),t(e.settings.add.value+t(this).attr("data-id")).val())})})},initEdit:function(){var e=this;t(e.settings.edit.container).unbind("click").click(function(i){t(e.settings.edit.form).attr("action",t(this).attr("data-edit")),t(e.settings.edit["delete"]).attr("href",t(this).attr("data-delete")),t(e.settings.edit.value).val(t(this).attr("data-value")),t(e.settings.edit.content).val(t(this).attr("data-content")),e.editInit(),e.editRefresh(t(this).attr("data-value")),t(e.settings.edit.note).unbind("mouseleave").mouseleave(function(){e.editRefresh(t(e.settings.edit.value).val())})})},addInit:function(e){var i=this;t(i.settings.add.note+" "+i.settings.add.item+"[data-id="+e+"]").mouseenter(function(){i.addRefresh(e,t(this).attr("data-value"))}),t(i.settings.add.note+" "+i.settings.add.item+"[data-id="+e+"]").click(function(){t(i.settings.add.value+e).val(t(this).attr("data-value"))})},addRefresh:function(e,i){var a=this;0==i&&t(a.settings.add.legend+e).html(""),t(a.settings.add.note+" "+a.settings.add.item+"[data-id="+e+"]").each(function(){t(this).attr("data-value")==i&&t(a.settings.add.legend+e).html(t(this).attr("data-legend")),t(this).attr("data-value")<=i?t(this).removeClass(a.settings["class"].out).addClass(a.settings["class"]["in"]):t(this).removeClass(a.settings["class"]["in"]).addClass(a.settings["class"].out)})},editInit:function(){var e=this;t(e.settings.edit.note+" "+e.settings.edit.item).mouseenter(function(){e.editRefresh(t(this).attr("data-value"))}),t(e.settings.edit.note+" "+e.settings.edit.item).click(function(){t(e.settings.edit.value).val(t(this).attr("data-value"))})},editRefresh:function(e){var i=this;0==e&&t(i.settings.edit.legend).html(""),t(i.settings.edit.note+" "+i.settings.edit.item).each(function(){t(this).attr("data-value")==e&&t(i.settings.edit.legend).html(t(this).attr("data-legend")),t(this).attr("data-value")<=e?t(this).removeClass(i.settings["class"].out).addClass(i.settings["class"]["in"]):t(this).removeClass(i.settings["class"]["in"]).addClass(i.settings["class"].out)})},getHtml:function(e,i){var a=t(t.parseHTML(e));return a.filter(i).add(a.find(i)).html()},refresh:function(){var t=this;t.initNote(),t.initEdit()}},t.fn.note=function(e){var i=t.extend({container:".note-user",add:{note:".note-add-user",item:".note-add-user-item",legend:"#note-add-legend-",value:"#note-add-value-",content:"#note-add-content-",form:"#note-add-form-"},edit:{container:"a[data-edit]",note:".note-edit-user",item:".note-edit-user-item",legend:"#note-edit-legend",value:"#note-edit-value",content:"#note-edit-content",form:"#note-edit-form","delete":"#note-edit-delete"},modal:{comment:"#note-comment-",add:"#note-add-"},"class":{"in":"fa-star",out:"fa-star-o"}},e);new a(i)}}(jQuery,window,window.document);