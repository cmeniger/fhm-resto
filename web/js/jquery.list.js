!function(t,i,n){function a(t){this.settings=t,this.search="",this.pagination=1,this.sort={field:"",order:""},this.current={},this.init()}a.prototype={init:function(){this.initCurrent(),this.initSearch(),this.initPagination(),this.initSort()},initCurrent:function(){var t=this;t.current={path:this.settings.url,data:this.settings.container.data,pagination:this.settings.container.pagination,post:{}}},initSearch:function(){var i=this;t(i.settings.search.container).closest("form").unbind("submit").submit(function(n){n.preventDefault(),i.search=t(i.settings.search.container).val(),i.pagination=1,i.refresh()})},initPagination:function(){var i=this;t(i.settings.pagination.container).unbind("click").click(function(n){return 0!=t(this).attr("data-active")&&(t("li.pagination-loader").show("fast"),i.current={path:t(this).attr("data-path"),data:"#"+t(this).attr("data-id-data"),pagination:"#"+t(this).attr("data-id-pagination"),post:JSON.parse(t(this).attr("data-post"))},i.pagination=t(this).attr("data-pagination"),void i.refresh())})},initSort:function(){var i=this;t(i.settings.sort.container).unbind("click").click(function(n){n.preventDefault(),i.sort.field=t(this).attr("data-field"),i.sort.order=t(this).attr("data-order"),i.pagination=1,i.refresh()})},initExternal:function(){t(n).historic()},refresh:function(){var n=this,a={FhmSearch:{search:n.search},FhmPagination:{pagination:n.pagination},FhmSort:{field:n.sort.field,order:n.sort.order}};t.ajax({type:"POST",url:n.current.path,data:t.extend({},a,n.current.post),success:function(a){t(n.current.data).fadeToggle(400,"linear",function(){t(n.current.data).html(n.getHtml(a,n.current.data)).fadeToggle(400,"linear"),t(n.current.pagination).html(n.getHtml(a,n.current.pagination)),n.initCurrent(),n.initSearch(),n.initPagination(),n.initSort(),n.initExternal(),t(i).scrollTop(0)})}})},getHtml:function(i,n){var a=t(t.parseHTML(i));return a.filter(n).add(a.find(n)).html()}},t.fn.list=function(i){var n=t.extend({url:t("#FhmSearch_search").closest("form").attr("action"),container:{data:"#content_data",pagination:"#content_pagination"},search:{container:"input[data-type=list]"},pagination:{container:"a[data-pagination]"},sort:{container:"a[data-sort]"}},i);new a(n)}}(jQuery,window,window.document);