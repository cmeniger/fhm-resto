function ddSort(){$(".dd-sort").nestable({listNodeName:"ol",itemNodeName:"li",rootClass:"dd-sort",listClass:"dd-sort-list",itemClass:"dd-sort-item",dragClass:"dd-sort-drag",handleClass:"dd-sort-handle",collapsedClass:"dd-sort-collapsed",placeClass:"dd-sort-placeholder",noDragClass:"dd-sort-nodrag",emptyClass:"dd-sort-empty",expandBtnHTML:"",collapseBtnHTML:"",maxDepth:1}).on("change",function(t){var a=t.length?t:$(t.target),e=$(".dd-sort .dd-sort-master");$.ajax({type:"POST",url:e.attr("data-url"),data:{master:e.attr("data-id"),list:JSON.stringify(a.nestable("serialize"))},success:function(t){}})}),$(".dd-sort-module").on("click",function(){var t=$(this);$(".dd-sort-module").removeClass("select").removeClass("load"),t.addClass("load"),$.ajax({type:"POST",url:$(this).attr("data-url"),data:{module:$(this).attr("data-module")},success:function(a){t.removeClass("load").addClass("select"),$("#dd-sort-data").html(a)}})})}function ddTree(){$(".dd-tree").each(function(){$(this).nestable({listNodeName:"ol",itemNodeName:"li",rootClass:"dd-tree",listClass:"dd-tree-list",itemClass:"dd-tree-item",dragClass:"dd-tree-drag",handleClass:"dd-tree-handle",collapsedClass:"dd-tree-collapsed",placeClass:"dd-tree-placeholder",noDragClass:"dd-tree-nodrag",emptyClass:"dd-tree-empty",expandBtnHTML:"",collapseBtnHTML:"",maxDepth:"undefined"==$(this).attr("data-depth")?99:$(this).attr("data-depth")}).on("change",function(t){var a=t.length?t:$(t.target),e=$(".dd-tree .dd-tree-master");$.ajax({type:"POST",url:e.attr("data-url"),data:{master:e.attr("data-id"),list:JSON.stringify(a.nestable("serialize"))},success:function(t){}})})})}function ddList(){$(".dd-list").each(function(){var t=$(this),a="undefined"==typeof t.attr("data-group")?1:t.attr("data-group");t.nestable({listNodeName:"ol",itemNodeName:"li",rootClass:"dd-list",listClass:"dd-list-list",itemClass:"dd-list-item",dragClass:"dd-list-drag",handleClass:"dd-list-handle",collapsedClass:"dd-list-collapsed",placeClass:"dd-list-placeholder",noDragClass:"dd-list-nodrag",emptyClass:"dd-list-empty",expandBtnHTML:"",collapseBtnHTML:"",group:a}).on("change",function(t){if("undefined"!=typeof $(this).attr("data-url")){var a=t.length?t:$(t.target);$.ajax({type:"POST",url:$(this).attr("data-url"),data:{id:$(this).attr("data-id"),list:JSON.stringify(a.nestable("serialize"))},success:function(t){}})}}).on("lostItem",function(t){$(this).trigger("change")}).on("gainedItem",function(t){$(this).trigger("change")})})}function addLink(){$("#FhmAddLink_form").on("submit",function(t){t.preventDefault();var a=$(this),e=(window.FormData?new FormData(a[0]):null,a.serialize());$.ajax({url:a.attr("action"),type:a.attr("method"),dataType:"json",data:e,success:function(t){var a=document.getElementById("addData"),e=a.getAttribute("box"),d=document.getElementById(e);d.value=t.link;var s=document.getElementById("FhmAdd_module");s.value=t.module;var l=document.getElementById("FhmAdd_data");l.value=t.id,$("#addData").foundation("reveal","close"),$("#addDataForm").foundation("reveal","open")},error:function(t,a,e){console.log(a)}})})}ddSort(),ddTree(),ddList(),addLink();